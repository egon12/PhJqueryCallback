<html>
  <meta charset="utf-8" />
  <title>Combo Box</title>

  <h1>Combo Box</h1>

  <p>
    This is some simple example to use PHPJQueryCallback to create html5 combo box.
    This example require Firefox or Google Chrome. In real Application, I will use
    Ajax Abort function. But this is for the example So I keep as simple as posible
  </p>

  <form action="controller.php" method="post" id="country_form" autocomplete="off">
    <h3>Type Country</h3>
    <input id="country" type="text" name="country" placeholder="country" list="country-list" data-url="controller.php" autocomplete="off"/><br />
    <datalist id="country-list">
    </datalist>
    <button type="submit" name="submitButton" value="submit">Submit</button>
  </form>

  <script src="js/jquery-1.10.2.min.js" type="text/javascript"></script>
  <script src="js/phpjquery.js" type="text/javascript"></script> 
  <script type="text/javascript">
    $(function () {

      var ignoreKeys = [
        13, //enter
        33, //pgup
        34, //pgdn
        35, //home
        36, //end
        37, //left
        38, //up
        39, //right
        40, //down
      ];

      var r = null;

      $('#country').keyup(function (e) {
        if ( ignoreKeys.indexOf(e.keyCode) == -1 ) {

          if (r != null) {r.abort()}
          $this = $(this);

          url = $this.data('url');
          query = $this.serialize();
          
          setTimeout( function () {
            r = $.getJSON ( url, query, function ( data ) {
              $.processPHPJQueryCallback (data);
            });
          }, 1300 );
        } 
      });
    });
  </script>

</html>

